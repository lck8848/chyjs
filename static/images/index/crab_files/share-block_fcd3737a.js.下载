(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"4Dkg":function(e,t,o){},"9Jro":function(e,t,o){"use strict";o.r(t);o("07d7"),o("5s+n"),o("4mDm");var n,s,i,a=o("d9Jj"),c=function(e,t){return a.a.get({url:"/wscgoods/poster/"+e+".json",data:t})},r=function(e){return a.a.get({url:"/wscshop/showcase/copyLink/exchange.json",data:e})},l=o("8afP"),p=(o("aO+S"),o("pxog"),o("nXDD"),o("N0PS"),o("TXUN"),o("4Dkg"),o("wx14")),h=o("oUJm"),u=o("ZgXx"),d=o("5B+z"),f=["qq","weibo","wechat","link","qrcode","poster"],m=Object(h.createNamespace)("share-sheet"),w=m[0],g=m[1],v=m[2],y=w({props:Object(p.default)({},u.popupMixinProps,{title:String,cancelText:String,description:String,getContainer:[String,Function],options:{type:Array,default:function(){return[]}},overlay:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}}),methods:{onCancel:function(){this.toggle(!1),this.$emit("cancel")},onSelect:function(e,t){this.$emit("select",e,t)},toggle:function(e){this.$emit("input",e)},getIconURL:function(e){return-1!==f.indexOf(e)?"https://img.yzcdn.cn/vant/share-icon-"+e+".png":e},genHeader:function(){var e=this.$createElement,t=this.slots("title")||this.title,o=this.slots("description")||this.description;if(t||o)return e("div",{class:g("header")},[t&&e("h2",{class:g("title")},[t]),o&&e("span",{class:g("description")},[o])])},genOptions:function(e,t){var o=this,n=this.$createElement;return n("div",{class:g("options",{border:t})},[e.map((function(e,t){return n("div",{attrs:{role:"button",tabindex:"0"},class:[g("option"),e.className],on:{click:function(){o.onSelect(e,t)}}},[n("img",{attrs:{src:o.getIconURL(e.icon)},class:g("icon")}),e.name&&n("span",{class:g("name")},[e.name]),e.description&&n("span",{class:g("option-description")},[e.description])])}))])},genRows:function(){var e=this,t=this.options;return Array.isArray(t[0])?t.map((function(t,o){return e.genOptions(t,0!==o)})):this.genOptions(t)},genCancelText:function(){var e=this.$createElement,t=Object(h.isDef)(this.cancelText)?this.cancelText:v("cancel");if(t)return e("button",{attrs:{type:"button"},class:g("cancel"),on:{click:this.onCancel}},[t])},onClickOverlay:function(){this.$emit("click-overlay")}},render:function(){var e=arguments[0];return e(d.default,{attrs:{round:!0,value:this.value,position:"bottom",overlay:this.overlay,duration:this.duration,lazyRender:this.lazyRender,lockScroll:this.lockScroll,getContainer:this.getContainer,closeOnPopstate:this.closeOnPopstate,closeOnClickOverlay:this.closeOnClickOverlay,safeAreaInsetBottom:this.safeAreaInsetBottom},class:g(),on:{input:this.toggle,"click-overlay":this.onClickOverlay}},[this.genHeader(),this.genRows(),this.genCancelText()])}}),b=o("DIQr"),P={type:"baseShare",name:"微信好友",icon:"wechat"},x={type:"timeline",name:"微信好友",icon:"wechat"},_={type:"poster",name:"分享海报",icon:"poster"},O={type:"qrcode",name:"二维码",icon:"qrcode"},k={type:"copy",name:"复制链接",icon:"link"},S={type:"baseShare",name:"百度分享",icon:"https://b.yzcdn.cn/public_files/2019/07/04/796030ef3a312878a75ab1185376daba.png",description:"需好友下载百度App"},C={type:"baseShare",name:"分享到抖音",icon:"https://img.yzcdn.cn/public_files/1d2ef431e93bdd5dca05802ea965b41b.png"},j={type:"baseShare",name:"分享到支付宝",icon:"https://img.yzcdn.cn/upload_files/2020/08/21/FndYz5zArPdjrNJfFINQq3RizPlV.png"},B={type:"baseShare",name:"分享到QQ",icon:"https://img.yzcdn.cn/upload_files/2020/08/21/FmR7Dup0981wQfPYecz3pmINPQT3.png"},I=(o("5+UC"),o("05lO")),T=(o("4X9F"),o("IkEG")),L=o("sxGJ"),A=o.n(L),$=A.a.isSupported(),z={name:"copy-link",components:(n={},n[T.default.Component.name]=T.default.Component,n),props:{copyText:{type:String,default:""}},data:function(){return{showCopyPop:!1}},mounted:function(){$&&new A.a(".share-js-copy").on("success",(function(){Object(I.default)({message:"复制成功",duration:800})}))},methods:{handleAction:function(){$||(this.showCopyPop=!0)}}},E=(o("EOpX"),o("KHd+")),q=Object(E.default)(z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"share-js-copy",attrs:{"data-clipboard-text":e.copyText},on:{click:e.handleAction}}),o("van-dialog",{attrs:{title:"复制链接","confirm-button-text":"关闭"},model:{value:e.showCopyPop,callback:function(t){e.showCopyPop=t},expression:"showCopyPop"}},[o("textarea",{staticClass:"text",domProps:{value:e.copyText}})])],1)}),[],!1,null,"eb35022a",null).exports,D={name:"share-pop",components:(s={},s[y.name]=y,s[q.name]=q,s),model:{prop:"show",event:"change"},state:["env"],props:{show:Boolean,copyText:String,showPlatfrom:{type:Boolean,default:!0},showPoster:Boolean,showQrcode:Boolean,showTimeLine:Boolean},data:function(){return{isBaidu:b.f}},computed:{options:function(){var e=[];return this.showPlatfrom&&e.push(this.switchPlatformShare()),this.showTimeLine&&e.push(x),this.showQrcode&&e.push(O),this.copyText&&e.push(k),this.showPoster&&!b.g&&e.push(_),e}},methods:{onSelect:function(e){e.name===k.name?(document.querySelector(".share-js-copy").click(),this.switchShow(!1)):this.$emit("action",e)},switchShow:function(e){this.$emit("change",e)},switchPlatformShare:function(){if(b.f)return S;if(b.g)return C;var e=this.env.platform;return"alipay"===e?j:"qq"===e?B:P}}},N=Object(E.default)(D,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("van-share-sheet",{attrs:{value:this.show,options:this.options,"lock-scroll":""},on:{select:this.onSelect,input:this.switchShow}},[t("template",{slot:"title"},[this._t("default")],2)],2),t("copy-link",{attrs:{"copy-text":this.copyText}})],1)}),[],!1,null,null,null).exports,X=(o("zKZe"),o("f4ya")),Q=o.n(X),R={name:"poster-pop",props:{show:{type:Boolean,default:!1}},data:function(){return{posterInfo:null,showPreview:!1,previewImg:"https://b.yzcdn.cn/public_files/357579aca68fc4714512660c8ede765a.png",previewLoaded:!1}},watch:{show:function(e){e&&(this.showPreview=!0,this.previewLoaded||(this.posterInfo=Object(l.i)(window,"_global.poster_info",{}),this.doGetPoster(this.posterInfo,!0)))}},methods:{closePop:function(){this.showPreview=!1,this.$emit("close")},doGetPoster:function(e,t,o){var n=this;void 0===t&&(t=!1),void 0===o&&(o=0);var s=e.type,i=e.more;c(s,Object.assign({retry:o},i,{url:encodeURIComponent(this.getPosterShareUrl())})).then((function(e){n.previewImg=e,n.previewLoaded=Boolean(n.previewImg)})).catch((function(){t?setTimeout((function(){n.doGetPoster(e,!1,1)}),1e3):(n.closePop(),n.$toast("生成海报失败，请稍后再试"))}))},getPosterShareUrl:function(){var e={share_from:"poster",is_share:1,shopAutoEnter:1};if(window.YzPageLogger){var t=window.YzPageLogger.getLogParams()||{},o=t.user,n=void 0===o?{}:o,s=t.context,i=void 0===s?{}:s;i.dc_ps&&(e.dc_ps=i.dc_ps),n.uuid&&(e.from_uuid=n.uuid)}var a=window.location.href,c=this.posterInfo;return c&&c.more&&c.more.url&&(a=c.more.url),Q.a.add(a,e)}}},G=(o("D7od"),Object(E.default)(R,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.showPreview?o("div",{staticClass:"preview",on:{touchmove:function(e){e.preventDefault()},click:function(t){return t.stopPropagation(),e.closePop(t)}}},[o("div",{staticClass:"img_view"},[o("img",{staticClass:"preview_img",attrs:{src:e.previewImg},on:{click:function(e){e.stopPropagation()}}}),e._m(0),o("div",{directives:[{name:"show",rawName:"v-show",value:e.previewLoaded,expression:"previewLoaded"}],staticClass:"preview_word"},[e._v("\n      长按图片保存至相册\n    ")])])]):e._e()}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"close_big"},[t("div",{staticClass:"close"})])}],!1,null,"376bc946",null).exports),J=o("/w9J"),U=o.n(J),Z=o("G7ty"),F=o("htSs"),K=o("sGvI"),Y={name:"share-block",components:(i={},i[N.name]=N,i[G.name]=G,i["share-benefit"]=function(){return o.e(47).then(o.bind(null,"o3A9"))},i["share-benefit-pop"]=function(){return o.e(48).then(o.bind(null,"Q0j5"))},i),getters:["hasShareBenefitActivity","shareBenefitActivity"],data:function(){return{show:!1,copyText:"",hasPoster:!1,hasLogin:Object(K.a)(),showPoster:!1}},computed:{shareBenefit:function(){return this.hasShareBenefitActivity?"share-benefit":""},shareBenefitPop:function(){return this.hasShareBenefitActivity?"share-benefit-pop":""}},created:function(){var e=this;F.a.observe("fullguide-data",(function(t){t.openShare&&(Object(Z.b)({et:"click",ei:"goods_share",en:"点击分享按钮",params:{share_benefit_id:e.shareBenefitActivity.activityId}}),e.hasLogin=Object(K.a)(),e.hasPoster=!!Object(l.i)(window,"_global.poster_info.type",""),(!e.copyText||e.copyText&&e.hasLogin)&&e.getCopyInfo(),e.switchPop(!0))}))},methods:{handleClick:function(e){switch(e.type){case"baseShare":this.$fullGuide("share"),Object(Z.b)({et:"click",ei:"goods_sharefriend",en:"点击分享给好友"});break;case"poster":Object(Z.b)({et:"click",ei:"goods_photo",en:"点击生成海报"}),this.showPoster=!0}this.switchPop(!1)},switchPop:function(e){this.show=e},getCopyInfo:function(){var e=this,t=Object(l.i)(window,"_global.copy_info",{});t&&t.query&&r(t.query).then((function(o){o&&(e.copyText=""+U()(t.baseText)+o)}))}}},H=Object(E.default)(Y,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("share-pop",{attrs:{"show-poster":e.hasPoster,"copy-text":e.copyText},on:{action:e.handleClick},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o(e.shareBenefit,{tag:"component",attrs:{"has-login":e.hasLogin},on:{close:function(t){e.switchPop(!1)}}})],1),o("poster-pop",{attrs:{show:e.showPoster},on:{close:function(t){e.showPoster=!1}}}),o(e.shareBenefitPop,{tag:"component",attrs:{"has-login":e.hasLogin}})],1)}),[],!1,null,null,null);t.default=H.exports},D7od:function(e,t,o){"use strict";var n=o("KXvZ");o.n(n).a},EOpX:function(e,t,o){"use strict";var n=o("oy2N");o.n(n).a},KXvZ:function(e,t,o){},ZgXx:function(e,t,o){e.exports=o("oxns")("ZgXx")},oy2N:function(e,t,o){}}]);