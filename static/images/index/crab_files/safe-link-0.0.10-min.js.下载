!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";
/**
 * @preserve Create and manage a DOM event delegator.
 *
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */var n=r(2);e.exports=function(e){return new n(e)},e.exports.Delegate=n},function(e,t,r){"use strict";var n=function(e){var t="";for(var r in e)""!==e[r]&&(t+=r.trim()+"="+e[r]+"&");return t?"?"+t.slice(0,t.length-1):""};var o={get:function(e,t){e=e.replace(/[[]/,"\\[").replace(/[]]/,"\\]"),t=t?"?"+t.split("#")[0].split("?")[1]:window.location.search;var r=RegExp("[?&]"+e+"=([^&#]*)").exec(t);return r?decodeURIComponent(r[1].replace(/\+/g," ")):""},remove:function(e,t){var r=e.split("?");if(r.length>=2){for(var n=encodeURIComponent(t)+"=",o=r[1].split(/[&;]/g),i=o.length;i-- >0;)-1!==o[i].lastIndexOf(n,0)&&o.splice(i,1);return e=r[0]+"?"+o.join("&")}return e},add:function(e,t){if(!e||0===e.length||0===e.trim().indexOf("javascript"))return"";var r=e.split("#"),o=r[0].split("?"),i={};return o[1]&&o[1].split("&").forEach((function(e){var t;t=e.split("="),i[t[0]]=t.slice(1).join("=")})),Object.keys(t).forEach((function(e){i[e.trim()]=encodeURIComponent(t[e])})),e=o[0]+n(i),r[1]?e+="#"+r[1]:e}};e.exports=o},function(e,t,r){"use strict";function n(e){this.listenerMap=[{},{}],e&&this.root(e),this.handle=n.prototype.handle.bind(this),this._removedListeners=[]}e.exports=n,n.prototype.root=function(e){var t,r=this.listenerMap;if(this.rootElement){for(t in r[1])r[1].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!0);for(t in r[0])r[0].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!1)}if(!e||!e.addEventListener)return this.rootElement&&delete this.rootElement,this;for(t in this.rootElement=e,r[1])r[1].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!0);for(t in r[0])r[0].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!1);return this},n.prototype.captureForType=function(e){return-1!==["blur","error","focus","load","resize","scroll"].indexOf(e)},n.prototype.on=function(e,t,r,n){var u,c,l,f;if(!e)throw new TypeError("Invalid event type: "+e);if("function"==typeof t&&(n=r,r=t,t=null),void 0===n&&(n=this.captureForType(e)),"function"!=typeof r)throw new TypeError("Handler must be a type of Function");return u=this.rootElement,(c=this.listenerMap[n?1:0])[e]||(u&&u.addEventListener(e,this.handle,n),c[e]=[]),t?/^[a-z]+$/i.test(t)?(f=t,l=i):/^#[a-z0-9\-_]+$/i.test(t)?(f=t.slice(1),l=s):(f=t,l=o):(f=null,l=a.bind(this)),c[e].push({selector:t,handler:r,matcher:l,matcherParam:f}),this},n.prototype.off=function(e,t,r,n){var o,i,a,s,u;if("function"==typeof t&&(n=r,r=t,t=null),void 0===n)return this.off(e,t,r,!0),this.off(e,t,r,!1),this;if(a=this.listenerMap[n?1:0],!e){for(u in a)a.hasOwnProperty(u)&&this.off(u,t,r);return this}if(!(s=a[e])||!s.length)return this;for(o=s.length-1;o>=0;o--)i=s[o],t&&t!==i.selector||r&&r!==i.handler||(this._removedListeners.push(i),s.splice(o,1));return s.length||(delete a[e],this.rootElement&&this.rootElement.removeEventListener(e,this.handle,n)),this},n.prototype.handle=function(e){var t,r,n,o,i,a=e.type,s=[];if(!0!==e.ftLabsDelegateIgnore){switch(3===(i=e.target).nodeType&&(i=i.parentNode),i.correspondingUseElement&&(i=i.correspondingUseElement),n=this.rootElement,e.eventPhase||(e.target!==e.currentTarget?3:2)){case 1:s=this.listenerMap[1][a];break;case 2:this.listenerMap[0]&&this.listenerMap[0][a]&&(s=s.concat(this.listenerMap[0][a])),this.listenerMap[1]&&this.listenerMap[1][a]&&(s=s.concat(this.listenerMap[1][a]));break;case 3:s=this.listenerMap[0][a]}var u,c=[];for(r=s.length;i&&r;){for(t=0;t<r&&(o=s[t]);t++)i.tagName&&["button","input","select","textarea"].indexOf(i.tagName.toLowerCase())>-1&&i.hasAttribute("disabled")?c=[]:o.matcher.call(i,o.matcherParam,i)&&c.push([e,i,o]);if(i===n)break;if(r=s.length,(i=i.parentElement||i.parentNode)instanceof HTMLDocument)break}for(t=0;t<c.length;t++)if(!(this._removedListeners.indexOf(c[t][2])>-1)&&!1===this.fire.apply(this,c[t])){c[t][0].ftLabsDelegateIgnore=!0,c[t][0].preventDefault(),u=!1;break}return u}},n.prototype.fire=function(e,t,r){return r.handler.call(t,e,t)};var o=function(e){if(e){var t=e.prototype;return t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector}}(Element);function i(e,t){return e.toLowerCase()===t.tagName.toLowerCase()}function a(e,t){return this.rootElement===window?t===document||t===document.documentElement||t===window:this.rootElement===t}function s(e,t){return e===t.id}n.prototype.destroy=function(){this.off(),this.root()}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var a=r(1),s=r.n(a),u=["youzan.com"],c=["isv.youzan.com","isv-dev.youzan.com"],l=[41785471],f=["@","\\"];function d(e){return""===e||"javascript:"===e||"javascript:;"===e||"javascript:void(0)"===e||"javascript:void(0);"===e||0===e.indexOf("tel:")||0===e.indexOf("mailto:")||0===e.indexOf("#")}function p(e){return!function(e){return u.indexOf(e)>-1||u.some((function(t){var r="."+t,n=e.lastIndexOf(r);return n>-1&&n===e.length-r.length}))}(e)||function(e){return c.indexOf(e)>-1||c.some((function(t){var r="."+t,n=e.lastIndexOf(r);return n>-1&&n===e.length-r.length}))}(e)||function(e){return f.some((function(t){return e.indexOf(t)>-1}))}(e)}function h(e){var t=void 0===e?{}:e,r=t.url,n=void 0===r?"":r,o=t.kdtId,a=void 0===o?"":o,u=t.extraQuery,c=void 0===u?{}:u;if(n=n.trim(),function(e){return l.some((function(t){return t==e}))}(a)||d(n))return n;var f=(n=function(e){var t=document.createElement("a");return t.href=e,t.href}(n)).match(/^https?:\/\/([-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,10})\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/);return!f||p(f[1])?s.a.add("https://rd.youzan.com/ban/common/outbound-link/judge",i({},c,{url:n})):n}function v(e){var t=void 0===e?{}:e,r=t.url,n=void 0===r?"":r,o=t.kdtId,i=void 0===o?"":o,a=t.openType,s=void 0===a?"":a,u=t.redirectType,c=void 0===u?"":u,l=t.extraQuery,f=h({url:n,kdtId:i,extraQuery:void 0===l?{}:l});f&&("replace"===c?location.replace(f):s?window.open(f,s):location.href=f)}function m(e){var t=void 0===e?{}:e,r=t.kdtId,n=void 0===r?"":r,i=t.redirectType,a=void 0===i?"":i,s=t.extraQuery,u=void 0===s?{}:s,c=t.beforeRedirect,l=t.delegateCanceled;o()(document.body).on("click","a",(function(e){var t,r;if(r=((t=this).getAttribute("href")||"").trim(),"A"!==t.tagName||d(r)){l&&l({delegateElement:this,event:e})}else{e.preventDefault();var o={delegateElement:this,event:e,kdtId:n,redirectType:a,extraQuery:u,openType:(this.target||"").trim(),url:(this.href||"").trim()},i=function(e){console.warn("safe-link: beforeRedirect canceled",e)};c?Promise.resolve(c(o)).then((function(e){e?v(e):i(e)})).catch((function(e){i(e)})):v(o)}}))}r.d(t,"delegate",(function(){return m})),r.d(t,"redirect",(function(){return v})),r.d(t,"getSafeUrl",(function(){return h})),window.SafeLink={delegate:m,redirect:v,getSafeUrl:h}}])}));