(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{RmiM:function(t,e,n){},rtT2:function(t,e,n){"use strict";var o=n("RmiM");n.n(o).a},ypof:function(t,e,n){"use strict";n.r(e);n("ma9I"),n("TeQF"),n("fbCW"),n("QWBl"),n("2B1R"),n("FZtP");var o=n("DzJC"),i=n.n(o),a=!1,s=[{name:"商品",selector:"goods",designType:"image-block"},{name:"评价",selector:"review",designType:"goods-review-block"},{name:"详情",selector:"detail",designType:"goods-detail-block"},{name:"推荐",selector:"recommend",designType:"recommend-block"}],r={name:"NavBarBlock",getters:["showRecommendGoods"],state:{showNavBar:function(t){return!t.isFastBuy},navTabShowList:function(t){var e=this,n=this.pageDesign;return s.filter((function(n){return!("review"===n.selector&&!t.shopConfig.showCustomerReviews)&&!("recommend"===n.selector&&!e.showRecommendGoods)})).filter((function(t){return!!n.find((function(e){return e.type===t.designType&&!e.notShow}))}))},pageDesign:function(t){var e=t.design;if(Array.isArray(e))return e;var n=e.top,o=void 0===n?[]:n,i=e.pic,a=void 0===i?[]:i,s=e.main,r=void 0===s?[]:s,c=e.bottom,l=void 0===c?[]:c;return o.concat(a,r,l)}},data:function(){return{activeIndex:0,goodsTop:0,navItemList:[],onScrollFn:function(){}}},computed:{showTopNavBar:function(){return this.showNavBar&&this.opacityVal>0},needGetNavEle:function(){return this.navItemList.length<this.navTabShowList.length},opacityVal:function(){return this.goodsTop<-100||this.activeIndex>0?1:this.goodsTop<0&&this.goodsTop>=-100?-this.goodsTop/100:0}},watch:{opacityVal:function(t){1===t?this.setTradeCarouselTop(48):0===t&&this.setTradeCarouselTop()}},mounted:function(){this.showNavBar&&(this.onScrollFn=i()(this.handleScroll,200),window.addEventListener("scroll",this.onScrollFn))},methods:{setTradeCarouselTop:function(t){void 0===t&&(t=40),this.$store.commit("setTradeCarouselTop",{top:t})},handleScroll:function(){var t=this;this.needGetNavEle&&this.getNavItemEle(),a||(this.navItemList.forEach((function(e,n){n!==t.activeIndex&&(e.getBoundingClientRect().top-40<5&&(t.activeIndex=n))})),0===this.activeIndex&&(this.goodsTop=this.navItemList[0].getBoundingClientRect().top))},getNavItemEle:function(){var t=this.navTabShowList.map((function(t){return"js-nav-"+t.selector})),e=[];t.forEach((function(t){var n=document.getElementById(t);n&&e.push(n)})),this.navItemList=e},goAnchor:function(t){a=!0;var e=this.navItemList[t];if(e)var n=setInterval((function(){var t=e.getBoundingClientRect().top-40;window.scrollBy(0,t),(t<5||o++>20)&&(clearInterval(n),a=!1)}),50),o=0}},destroy:function(){window.removeEventListener("scroll",this.onScrollFn)}},c=(n("rtT2"),n("KHd+")),l=Object(c.default)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showTopNavBar?n("div",[n("van-tabs",{class:["m-nav-bar","theme__tabs",{"m-nav-bar__list--2":2===t.navTabShowList.length,"m-nav-bar__list--3":3===t.navTabShowList.length}],style:{opacity:t.opacityVal},attrs:{"line-width":"26",border:!1},on:{click:t.goAnchor},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.navTabShowList,(function(t,e){return n("van-tab",{key:e,attrs:{title:t.name}})})),1)],1):t._e()}),[],!1,null,null,null);e.default=l.exports}}]);