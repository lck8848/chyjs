(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"/4te":function(t,o,s){"use strict";var i=s("N9LG");s.n(i).a},"7ypv":function(t,o,s){},BuiD:function(t,o,s){"use strict";var i=s("aCiH");s.n(i).a},Eggo:function(t,o,s){"use strict";s.r(o);s("w6Z4");var i,e,a,n,c=s("rQYt"),r={name:"GoodsStock",components:(i={},i[c.default.name]=c.default,i),getters:["showPostageText","showSoldNum","goodsSoldNumText","showDeliveryBar","showGoodsStock","showSoldNum","stockNum"]},l=(s("Qw9i"),s("KHd+")),p=Object(l.default)(r,(function(){var t=this,o=t.$createElement,s=t._self._c||o;return t.showDeliveryBar?s("div",{staticClass:"goods-stock"},[s("div",{staticClass:"goods-stock__postage"},[s("span",{staticClass:"m-promotion__label"},[t._v("运费")]),s("span",[s("span",{staticClass:"goods-stock__value"},[t._v(t._s(t.showPostageText))])])]),s("div",{staticClass:"goods-stock__sold-num"},[t.showSoldNum?s("span",[t._v("已售 "+t._s(t.goodsSoldNumText))]):t._e(),t.showGoodsStock?s("span",[t._v("剩余 "+t._s(t._f("addPriceUnit")(t.stockNum)))]):t._e()])]):t._e()}),[],!1,null,null,null).exports,u=s("8afP"),d={name:"PackageBuy",getters:["packageBuy"],computed:{isMultiPackage:function(){return this.packageBuy&&this.packageBuy.goodsList.length>1}},methods:{goPackageList:function(){Object(u.o)(this.packageBuy.url)}}},_=(s("pwXn"),Object(l.default)(d,(function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"package-buy",on:{click:t.goPackageList}},[s("van-cell-group",{staticClass:"discount-packages-container",attrs:{border:!1}},[s("van-cell",{staticClass:"align-right",attrs:{"is-link":t.isMultiPackage,border:!1,title:"优惠套餐","title-class":"cell-title__class"}},[t.isMultiPackage?s("span",{staticClass:"van-font-12 van-c-gray-darker"},[t._v("\n        查看全部\n      ")]):t._e()]),s("van-cell",{staticClass:"package-buy-lists",attrs:{border:!1,"value-class":"cell-value__class"}},[s("ul",{staticClass:"package-buy__list"},t._l(t.packageBuy.goodsList,(function(o){return s("li",{key:o.id,staticClass:"package-buy__item",class:{"package-buy__item--long":!t.isMultiPackage}},[s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:o.imageUrl,expression:"item.imageUrl",arg:"background-image"}],staticClass:"package-buy__item-img"}),s("div",{staticClass:"item-content",class:{"item-content--top":1===o.planType||!o.showPreference}},[s("p",{staticClass:"item__name"},[t._v("\n              "+t._s(o.title)+"\n            ")]),s("p",{staticClass:"item__price theme__color"},[t._v("\n              套餐价：￥"+t._s(o.price)+t._s(1===o.planType?"起":"")+"\n            ")]),1!==o.planType&&o.showPreference?s("p",{staticClass:"item__save"},[t._v("\n              "+t._s(o.hasMaxSavings?"最多":"")+"可省￥"+t._s(o.saveMoneyCn)+"\n            ")]):t._e()])])})),0)])],1)],1)}),[],!1,null,null,null).exports),m=s("jZ0v"),h=s("DIQr"),v=(s("yXV3"),{name:"CashBackRule",state:["userCenterTitle"],getters:["cashBackRuleStr","cashBackProRuleStr","isCashbackPro","isCashbackProStoredValue","cashbackPro"],beforeCreate:function(){this.$dispatch("getUserCenterTitle")}}),g=(s("BuiD"),Object(l.default)(v,(function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"cashback-popup"},[s("div",{staticClass:"cashback-popup__top-text"},[s("span",[t._v(t._s(t.cashBackProRuleStr||t.cashBackRuleStr))])]),s("p",{staticClass:"cashback-popup__bottom-text"},[t._v("提示：")]),t.isCashbackPro&&t.isCashbackProStoredValue?[s("p",{staticClass:"cashback-popup__bottom-text"},[t._v("\n      1.返还的储值金将发放至储值余额，请前往“"+t._s(t.userCenterTitle)+"”-“余额”中查看。\n    ")]),s("p",{staticClass:"cashback-popup__bottom-text"},[t._v("\n      2.后续若发生取消订单或退货，优先扣除已返储值金，若储值金不足，则从货款中扣除差额部分。\n    ")]),s("p",{staticClass:"cashback-popup__bottom-text"},[t._v("\n      3.订单支付完成"+t._s(t.cashbackPro.feedbackLimitDays)+"天后，且未发起退款才会收到储值金返还。\n    ")])]:[s("p",{staticClass:"cashback-popup__bottom-text"},[t._v("\n      1.通过“微信支付”付款，返现金额将通过“微信退款”发放，请注意查收。\n    ")]),s("p",{staticClass:"cashback-popup__bottom-text"},[t._v("\n      2.通过“银行卡”付款，返现金额将在3天内，原路发放至银行卡账户。\n    ")]),t.isCashbackPro?s("p",{staticClass:"cashback-popup__bottom-text"},[t._v("\n      3.后续若发生取消订单或退货，则从货款中扣除已返现金额。\n    ")]):t._e()]],2)}),[],!1,null,null,null).exports),C={name:"PromotionCard",props:{headValue:{type:String,default:""},unit:{type:String,default:""},condition:{type:String,default:""},extraCondition:{type:String,default:""},tag:{type:String,default:""},hasArrow:{type:Boolean,default:!1},title:{type:String,default:""},valid:{type:String,default:""},actionText:{type:String,default:""},goodsList:{type:Array,default:function(){return[]}},got:{type:Boolean,default:!1}}},f=(s("cnFx"),Object(l.default)(C,(function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{class:["promotion-card",t.goodsList&&t.goodsList.length>0?"promotion-card--showcase":"","theme__bg-vice"]},[s("div",{staticClass:"promotion-card__head"},[s("div",{staticClass:"promotion-card__head-top"},[s("span",{class:["promotion-card__head-value","price-length-"+t.headValue.length,"theme__color"]},[t._v(t._s(t.headValue))]),t.unit?s("span",{staticClass:"promotion-card__head-value-unit theme__color"},[t._v(t._s(t.unit))]):t._e()]),t.condition?s("div",{staticClass:"promotion-card__condition"},[t._v("\n      "+t._s(t.condition)+"\n    ")]):t._e(),t.extraCondition?s("div",{staticClass:"promotion-card__condition promotion-card__condition-1"},[t._v("\n      "+t._s(t.extraCondition)+"\n    ")]):t._e()]),t.tag?s("div",{staticClass:"promotion-card__tag theme__color theme__bg-fade"},[t._v("\n    "+t._s(t.tag)+"\n  ")]):t._e(),s("div",{staticClass:"promotion-card__content"},[t.goodsList&&t.goodsList.length>0?[s("div",{staticClass:"promotion-card__content-title2"},[t._v(t._s(t.title))]),s("div",{staticClass:"promotion-card__content-showcase"},t._l(t.goodsList,(function(o,i){return s("div",{key:i,staticClass:"promotion-card__content-image-wrapper"},[s("img",{staticClass:"promotion-card__content-image",attrs:{src:o.imageUrl}}),s("div",{staticClass:"promotion-card__content-image-desc"},[t._v("\n            ￥"+t._s(o.price)+"\n          ")])])})),0)]:[s("div",{staticClass:"promotion-card__title"},[t._v(t._s(t.title))]),t.valid?s("div",{staticClass:"promotion-card__sub-title"},[t._v(t._s(t.valid))]):t._e()]],2),s("div",{class:["promotion-card__action",t.actionText?"promotion-card__action--has-btn":""]},[t.actionText&&!t.got?s("div",{staticClass:"promotion-card__btn theme__button--main"},[t._v("\n      "+t._s(t.actionText)+"\n    ")]):t.hasArrow?s("div",{staticClass:"promotion-card__arrow theme__color"},[s("van-icon",{attrs:{name:"arrow",size:"18px"}})],1):t._e()]),t.got?s("div",{staticClass:"promotion-card__got"},[t._m(0)]):t._e()])}),[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"promotion-card__got-wrapper theme__border"},[o("div",{staticClass:"promotion-card__got-cnt theme__border theme__bg-fade",attrs:{"border-after":"general"}},[o("span",{staticClass:"theme__color"},[this._v("已领")])])])}],!1,null,null,null).exports),k=s("6vqa"),w=s("JL3r"),y=s.n(w),b="/wscump/bale/recommend",P="/wscump/meetreduce/recommend",x="ump",S={name:"PromotionPop",components:(e={CashBackRule:g},e[f.name]=f,e[k.a.name]=k.a,e),props:{isShow:{type:Boolean,default:!1}},data:function(){return{isShowMore:!1,isShowCashBackRule:!1,moreText:{}}},state:["goods","displayPop","umpCouponList","optimalCouponList","orderActivity"],getters:["goodsPromotion","optimalCouponShowList","formatedGoodsPromotion","umpCouponShowList","kdtId","cashBackProPopUpTitle","optimalPreferentialPrice","showOptimalCouponMoreBtn"],methods:{unfoldOptimalCouponList:function(){this.$dispatch("showMoreOptimalCoupon")},hidePopUp:function(){this.$emit("close")},handleCouponClick:function(t,o){var s=null;(s=o===x?this.umpCouponShowList[t]:this.optimalCouponShowList[t]).disabled||this.$dispatch("handleGetCoupon",{id:s.id,type:o})},onPromotionClick:function(t,o){var s=this.goodsPromotion[t];if(s){if("cashbackPro"===o)return this.showCashBackRule(),void this.$dispatch("handlePromotionCoupon");"meetReduce"===o||"present"===o?this.openActivity("meetReduce",P):"bale"===o&&this.openActivity(o,b),s.more?this.showPopUpMore(s.more):-1!==["plusBuy","secondHalfDiscount","carriageDiscount","postage"].indexOf(o)&&Object(h.h)(s.url)}},showPopUpMore:function(t){this.moreText=t,this.isShowMore=!0},hidePopUpMore:function(){this.isShowMore=!1},showCashBackRule:function(){this.isShowCashBackRule=!0},hideCashBackRule:function(){this.$dispatch("handlePromotionCoupon"),this.isShowCashBackRule=!1},openActivity:function(t,o){var s=this.getAvtivityByType(t),i=s.activityAlias,e=s.alias;if(i||e){var a=y()("https://h5.youzan.com"+o+"?kdt_id="+this.kdtId+"&alias="+(i||e),"h5",this.kdtId);Object(h.h)(a)}},getAvtivityByType:function(t){return this.orderActivity[t]||{}}}},B=(s("/4te"),Object(l.default)(S,(function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("common-pop",{staticClass:"goods-promotion__popup",attrs:{title:"优惠"},on:{"btn-click":t.hidePopUp,close:t.hidePopUp},model:{value:t.displayPop.showCouponPopUp,callback:function(o){t.$set(t.displayPop,"showCouponPopUp",o)},expression:"displayPop.showCouponPopUp"}},[t.optimalCouponShowList&&t.optimalCouponShowList.length>0?s("div",{staticClass:"goods-promotion__popup-cnt-title"},[t._v("\n      使用以下优惠，预计券后\n      "),s("span",{staticClass:"theme__color"},[t._v(t._s(t.optimalPreferentialPrice))])]):t._e(),t._l(t.optimalCouponShowList,(function(o,i){return s("promotion-card",{key:o.id,attrs:{got:o.got,"head-value":o.headValue,unit:o.unit,valid:o.valid,condition:o.condition,"extra-condition":o.extraCondition,title:o.title,"action-text":o.actionText,tag:o.tag,"is-gray-text":!0},nativeOn:{click:function(o){t.handleCouponClick(i,"optimal")}}})})),t.showOptimalCouponMoreBtn?s("div",{staticClass:"goods-promotion__popup-more",on:{click:t.unfoldOptimalCouponList}},[t._v("\n      更多推荐优惠券\n      "),s("van-icon",{attrs:{size:"12px",name:"arrow-down",color:"#969799","custom-class":"goods-promotion__popup-more-icon"}})],1):t._e(),t.formatedGoodsPromotion&&t.formatedGoodsPromotion.length>0?s("div",{staticClass:"goods-promotion__popup-cnt-title"},[t._v("\n      促销\n    ")]):t._e(),t._l(t.formatedGoodsPromotion,(function(o,i){return s("promotion-card",{key:o.id,attrs:{"data-type":o.type,"head-value":o.headValue,unit:o.unit,valid:o.valid,condition:o.condition,title:o.title,"action-text":o.actionText,tag:o.tag,"has-arrow":o.hasExtraDesc,"goods-list":o.goodsList,"is-gray-text":!0},nativeOn:{click:function(s){t.onPromotionClick(i,o.type)}}})})),t.umpCouponShowList&&t.umpCouponShowList.length>0?s("div",{staticClass:"goods-promotion__popup-cnt-title"},[t._v("\n      可领优惠券\n    ")]):t._e(),t._l(t.umpCouponShowList,(function(o,i){return s("promotion-card",{key:o.id,attrs:{got:o.got,"head-value":o.headValue,unit:o.unit,valid:o.valid,condition:o.condition,"extra-condition":o.extraCondition,title:o.title,"action-text":o.actionText,tag:o.tag,"is-gray-text":!0},nativeOn:{click:function(o){t.handleCouponClick(i,"ump")}}})})),t.optimalCouponShowList&&t.optimalCouponShowList.length>0?s("div",{staticClass:"goods-promotion__popup-tip"},[t._v("\n      券后价格仅为初步预估，请以最终购买价格为准\n    ")]):t._e()],2),s("common-pop",{staticClass:"goods-promotion__popup",on:{"btn-click":t.hidePopUpMore,close:t.hidePopUpMore},model:{value:t.isShowMore,callback:function(o){t.isShowMore=o},expression:"isShowMore"}},[s("div",{staticClass:"goods-promotion__more-title"},[t._v(t._s(t.moreText.title))]),s("div",[t._v(t._s(t.moreText.desc))])]),s("common-pop",{staticClass:"goods-promotion__popup",attrs:{title:t.cashBackProPopUpTitle,button:"知道了"},on:{"btn-click":t.hideCashBackRule,close:t.hideCashBackRule},model:{value:t.isShowCashBackRule,callback:function(o){t.isShowCashBackRule=o},expression:"isShowCashBackRule"}},[s("cash-back-rule")],1)],1)}),[],!1,null,null,null).exports),L={name:"GoodsPromotion",components:(a={},a[m.a.name]=m.a,a[B.name]=B,a),state:["orderPromotionLimit"],getters:["goodsPromotionList","kdtId"],data:function(){return{isShow:!1,isShowMore:!1,isShowCashBackRule:!1,moreText:{}}},methods:{formatItemSuffix:function(t,o,s){var i="";return t&&(i+=t),o<s-1&&(i+=";"),i},showPopUp:function(){this.orderPromotionLimit||this.$dispatch("handlePromotionCoupon")},showPopUpMore:function(t){void 0===t&&(t=null),t&&(this.isShowMore=!0,this.moreText=t)},showCashBackRule:function(){this.isShowCashBackRule=!0},isMeetReduce:function(t){return"meetReduce"===t||"present"===t},handlePlusBuyClick:function(t){Object(h.h)(t)},hidePopUp:function(){this.isShow=!1}}},T=(s("Wg5T"),Object(l.default)(L,(function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"goods-promotion"},[s("div",{staticClass:"goods-promotion__list",on:{click:t.showPopUp}},[s("span",{staticClass:"m-promotion__label"},[t._v("优惠")]),s("span",{staticClass:"goods-promotion__info"},[t.orderPromotionLimit?s("div",{staticClass:"goods-promotion__limit-desc"},[t._v("\n        促销信息加载中，请以最终结算价为准\n      ")]):t._l(t.goodsPromotionList,(function(o,i){return s("div",{key:i,staticClass:"goods-promotion__desc"},[s("div",{staticClass:"goods-promotion__tag theme__bg-fade"},[s("span",{staticClass:"theme__color"},[t._v(t._s(o.title))])]),"umpCouponList"===o.key?s("div",{staticClass:"goods-coupon__desc"},[s("div",{staticClass:"goods-coupon__desc-ctn"},t._l(o.couponList,(function(o){return s("span",{key:o.id,staticClass:"goods-coupon__desc-item theme__color theme__bg-fade"},[s("span",[t._v(t._s(o.useThresholdAndValueCopywriting))])])})),0)]):t._e(),"present"!==o.key?s("span",{staticClass:"goods-promotion__name"},[t._v(t._s(o.desc))]):s("span",{staticClass:"goods-promotion__name"},t._l(o.presentOutList,(function(o,i){return s("span",{key:i},[t._v("\n            "+t._s(o.presentPrefix)+"\n            "),t._l(o.goodsModels,(function(i,e){return s("span",{key:e},[t._v("\n              送"+t._s(o.presentNum||1)+"件\n              "),s("a",{staticClass:"theme__color goods-promotion__present-link",attrs:{href:i.url},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(i.title))]),t._v("\n              "+t._s(o.presentSuffix?"、":";")+"\n            ")])})),t._v("\n            "+t._s(o.presentSuffix||"")+"\n          ")],2)})),0)])}))],2),t.orderPromotionLimit?t._e():s("van-icon",{staticClass:"goods-promotion__arrow",attrs:{name:"arrow",size:"16px",color:"#969799"}})],1),s("promotion-pop",{attrs:{"is-show":t.isShow},on:{close:t.hidePopUp}})],1)}),[],!1,null,null,null).exports),M={name:"PromotionBlock",components:(n={},n[p.name]=p,n[_.name]=_,n[T.name]=T,n),getters:["packageBuy","showGoodsPromotion"],state:["goods","isFastBuy"]},R=(s("n9qt"),Object(l.default)(M,(function(){var t=this.$createElement,o=this._self._c||t;return this.isFastBuy?this._e():o("div",{staticClass:"module-unit m-promotion"},[o("goods-stock",{staticClass:"u-base-padding-row"}),this.showGoodsPromotion?o("goods-promotion",{staticClass:"u-base-padding-row"}):this._e(),this.packageBuy?o("package-buy"):this._e()],1)}),[],!1,null,null,null));o.default=R.exports},KJk6:function(t,o,s){},N9LG:function(t,o,s){},Qw9i:function(t,o,s){"use strict";var i=s("wmc8");s.n(i).a},Wg5T:function(t,o,s){"use strict";var i=s("7ypv");s.n(i).a},aCiH:function(t,o,s){},"c8/8":function(t,o,s){},cnFx:function(t,o,s){"use strict";var i=s("c8/8");s.n(i).a},feBV:function(t,o,s){},n9qt:function(t,o,s){"use strict";var i=s("KJk6");s.n(i).a},pwXn:function(t,o,s){"use strict";var i=s("feBV");s.n(i).a},wmc8:function(t,o,s){}}]);