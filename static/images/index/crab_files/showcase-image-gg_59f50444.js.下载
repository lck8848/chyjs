(window.wpJsonpH5Components=window.wpJsonpH5Components||[]).push([[55],{"4TZP":function(n,t,e){"use strict";e.d(t,"a",(function(){return o})),e.d(t,"b",(function(){return r}));var i=e("KaBt"),o=function(n){return Object(i.b)({url:"/wscshop/ump/coupon/takeCouponByAlias.json",type:"POST",data:n})},r=function(n){return Object(i.a)({url:"/wscump/coupon/coupon_use_redirect.json",type:"GET",data:n})}},"A/2y":function(n,t,e){n.exports=e("s159")("A/2y")},B83N:function(n,t,e){n.exports=e("s159")("B83N")},Fu4p:function(n,t,e){"use strict";e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return o})),e.d(t,"b",(function(){return r}));e("yXV3"),e("rB9j"),e("UxlC"),e("EnZy");function i(n,t){if(!n||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return n.classList?n.classList.contains(t):(" "+n.className+" ").indexOf(" "+t+" ")>-1}function o(n,t){if(n){for(var e=n.className,o=(t||"").split(" "),r=0,a=o.length;r<a;r++){var c=o[r];c&&(n.classList?n.classList.add(c):i(n,c)||(e+=" "+c))}n.classList||(n.className=e)}}function r(n,t){for(var e=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;n&&!e.call(n,t);)n=n.parentElement;return n}},IWMP:function(n,t,e){"use strict";e.d(t,"e",(function(){return m})),e.d(t,"c",(function(){return p})),e.d(t,"b",(function(){return v})),e.d(t,"a",(function(){return h})),e.d(t,"d",(function(){return b}));e("yXV3"),e("tkto"),e("rB9j"),e("UxlC");var i=e("Z0cm"),o=e.n(i),r=e("YO3V"),a=e.n(r),c=e("xaJk"),s=e.n(c),u=e("mwIZ"),l=e.n(u),d=e("UQhv"),f=e.n(d),g=e("V3nW"),m=function(n,t){void 0===n&&(n={});var e=void 0===t?{}:t,i=e.numberKeys,r=void 0===i?[]:i,c=e.booleanKeys,u=void 0===c?[]:c,l=function(n,t){if(null==n)return{};var e,i,o={},r=Object.keys(n);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(o[e]=n[e]);return o}(e,["numberKeys","booleanKeys"]);return function n(t,e){return void 0===e&&(e=!0),function(i){var r;if(o()(t)&&t.length>0)r=[];else{if(!(a()(t)&&Object.keys(t).length>0))return t;r={}}return s()(t,(function(t,o,r){e&&(o=n(o)(i));var a=i({key:r,value:o})||{},c=a.key,s=void 0===c?r:c,u=a.value,l=void 0===u?o:u;return t[s]=l,t}),r)}}(n)((function(n){var t=n.key,e=n.value;return"string"==typeof t&&(t=f()(t)),"function"==typeof l[t]?e=l[t](e):r.indexOf(t)>-1?e=+e:u.indexOf(t)>-1&&(e=!!+e),{key:t,value:e}}))},p=function(n){void 0===n&&(n="");return/^https?:\/\/\S*\.?(koudaitong\.com|kdt\.im|youzan\.com)/.test(n)},v=function(n){return!l()(_global,"miniprogram.isMiniProgram")||!n||p(n)},h=function(n,t){return Object(g.initComponentList)({url:"/wscshop/common/components.json",components:n,extraData:t||{}})},b=function(n){return"string"!=typeof n?n:n.replace("http://","https://")}},Ncca:function(n,t,e){"use strict";e.d(t,"b",(function(){return s})),e.d(t,"a",(function(){return u}));e("QWBl"),e("tkto"),e("FZtP"),e("5+UC");var i=e("05lO"),o=e("JL3r"),r=e.n(o),a=e("DIQr"),c=e("4TZP"),s=function(n){return Object.keys(n).forEach((function(t){""!==n[t]&&void 0!==n[t]||delete n[t]})),n},u=function(n){var t=n.globalData,e=n.id,o=n.alias,r=n.successCb,a=n.errorCb,u=t.fans_id,f=void 0===u?"":u,g=t.fans_type,m=void 0===g?"":g,p=t.kdt_id;if(!d(t))return l(e,o,p);var v={groupId:e,alias:o,fansId:f,fansType:m,source:"wap_showcase"};Object(c.a)(s(v)).then((function(n){r&&r(n)})).catch((function(n){var t=n.code,e=n.msg;0!==t&&t<1e4||(Object(i.a)(e||"领取失败"),a&&a({code:t}))}))},l=function(n,t,e){t&&setTimeout((function(){Object(a.f)(r()("/v2/ump/promocard/fetch?alias="+t+"&kdt_id="+e,"h5",e))}),500)},d=function(n){var t=n.fans_id,e=void 0===t?"":t,i=n.fans_type,o=void 0===i?"":i,r=n.user,a=void 0===r?{}:r,c=n.buyer&&n.buyer.id||0,s=a.has_login;return!!(c||o&&e||void 0!==s&&s)}},WPeF:function(n,t){n.exports=function(n,t,e,i,o){return o(n,(function(n,o,r){e=i?(i=!1,n):t(e,n,o,r)})),e}},asDA:function(n,t){n.exports=function(n,t,e,i){var o=-1,r=null==n?0:n.length;for(i&&r&&(e=n[++o]);++o<r;)e=t(e,n[o],o,n);return e}},gX24:function(n,t,e){"use strict";e.r(t);e("TeQF"),e("2B1R"),e("zKZe"),e("rB9j"),e("Rm1S"),e("5+UC");var i=e("05lO"),o=(e("G+3h"),e("GMZG")),r=e("asw2"),a=e.n(r),c=e("F+bm"),s=e.n(c),u=e("JL3r"),l=e.n(u),d=e("3Cg9"),f=e("B83N"),g=e.n(f),m=e("f4ya"),p=e.n(m),v={0:"swipe",1:"split",5:"swipe",6:"slide",7:"top2end",8:"imageNav",9:"textNav"},h=9,b=e("A/2y"),y=e.n(b),k=e("Ncca"),_=e("Fu4p"),w=e("IWMP"),O={name:"showcase-image-ad",components:{"cap-image-ad":o.a},mixins:[d.a],computed:{config:function(){var n=this.componentData,t=n.show_method,e=n.size,i=n.count,o=n.image_fill_style,r=n.border_width,a=n.slide_setting,c=void 0===a?"0":a,u=n.color,l=void 0===u?"#333":u,d=n.background_color,f=void 0===d?"#fff":d,m=n.image_style,p=void 0===m?1:m,b=n.corner_type,y=void 0===b?1:b,k=n.page_margin,_=void 0===k?0:k,w=n.indicator,O=void 0===w?1:w,j=n.sub_entry,x=void 0===j?[]:j,U=this.globalData.kdt_id,C=g()(v[t]);if(x.length){var L=s()(x),N=this.formatList(L,C).map((function(n){return"recharge_center"===n.linkType?Object.assign({},n,{linkUrl:n.linkUrl+"&kdt_id="+U+"&entry=9"}):n}));return+t===h&&this.sendTextNavLog(N),{showMethod:t,swipeFill:"1"===o,borderWidth:r,slideSetting:c,backgroundColor:f,color:l,count:i,size:+e,images:N,imageStyle:+p,cornerType:+y,pageMargin:_,indicator:O}}}},mounted:function(){this.delegateGetCoupon()},methods:{formatList:function(n,t){var e=this,i=this.globalData.kdt_id;return n.filter((function(n){var t=n.linkUrl;return Object(w.b)(t)})).map((function(n,t){var o=/\.gif$/.test(n.imageUrl)?n.imageUrl+"!large.gif":a()(n.imageUrl,"!730x0.jpg"),r=Object.assign({},n,{imageUrl:Object(w.d)(o)}),c=e.getBannerId(t),s=r.alias,u=void 0===s?"":s,d=r.linkUrl,f=void 0===d?"":d;if(r.loggerParams=Object.assign({banner_id:c,item_id:u,item_type:e.loggerName,component:e.loggerName,target:f,index:t},e.extraLogParams),r.linkUrl){var g=e.getUrlWithBannerId(r.linkUrl,c);r.linkUrl=l()(g,"",i)}else r.hotAreas&&r.hotAreas.length&&(r.hotAreas=r.hotAreas.filter((function(n){var t=n.linkUrl;return Object(w.b)(t)})).map((function(n){var t=e.getUrlWithBannerId(n.linkUrl,c);return Object.assign({},n,{linkUrl:l()(t,"",i)})})));return r}))},getUrlWithBannerId:function(n,t){return Object(w.c)(n)&&(n=p.a.add(n,{banner_id:t})),n},getItemType:function(){var n=this.componentData.show_method;return g()(v[n])},delegateGetCoupon:function(){var n=this;y()(this.$el).on("click",".cap-image-ad",(function(t){var e=t.target;if(Object(_.c)(e,"cap-image-ad__link")||(e=Object(_.b)(e,"a")),e){var i=e,o=i.href,r=void 0===o?"":o,a=(i.dataset||{}).hotareaIndex,c=p.a.get("banner_id",r).match(/~(\d)~/);if(c){var s=c[1],u=n.getImageLink(s,a),l=u.linkType,d=void 0===l?"":l,f=u.linkId,g=void 0===f?"":f,m=u.alias,v=void 0===m?"":m;return"coupon"===d&&(g||v)?(n.getCoupon(g,v),t.preventDefault(),void t.stopPropagation()):void 0}}}))},getImageLink:function(n,t){var e=this.config.images[n]||{};return"hotarea"===e.linkType&&Array.isArray(e.hotAreas)&&(e=e.hotAreas[t]||{}),e},getCoupon:function(n,t){var e=this.globalData;Object(k.a)({id:n,alias:t,globalData:e,successCb:function(n){var t=n?"领取成功":"领取失败";Object(i.a)(t)}})},sendTextNavLog:function(n){this.hasSendNavLog||(this.logger({et:"view",ei:"view",en:"内容曝光",params:{view_objs:n.map((function(n){return n.loggerParams}))}}),this.hasSendNavLog=!0)}}},j=e("KHd+"),x=Object(j.a)(O,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.config.images&&n.config.images.length?e("cap-image-ad",{ref:"imageAd",attrs:{"show-method":n.config.showMethod,"swipe-fill":n.config.swipeFill,"border-width":n.config.borderWidth,"slide-setting":n.config.slideSetting,color:n.config.color,"background-color":n.config.backgroundColor,count:n.config.count,size:n.config.size,images:n.config.images,"image-style":n.config.imageStyle,"corner-type":n.config.cornerType,"page-margin":n.config.pageMargin,indicator:n.config.indicator}}):n._e()}),[],!1,null,null,null);t.default=x.exports},xaJk:function(n,t,e){var i=e("asDA"),o=e("SKAX"),r=e("ut/Y"),a=e("WPeF"),c=e("Z0cm");n.exports=function(n,t,e){var s=c(n)?i:a,u=arguments.length<3;return s(n,r(t,4),e,u,o)}}}]);